package by.paul.application.two.service;

import by.paul.application.two.entity.Order;
import by.paul.application.two.entity.Request;
import by.paul.application.two.repository.impl.BookStorage;
import by.paul.application.two.repository.impl.OrderStorage;
import by.paul.application.two.repository.impl.RequestStorage;

public class Service {
    BookStorage bookStorage = new BookStorage();
    OrderStorage orderStorage = new OrderStorage();
    RequestStorage requestStorage = new RequestStorage();

    public Service() {
    }

    public void addBook(String bookName, int amount) {
        bookStorage.addBook(bookName, amount);
        if (requestStorage.getByName(bookName) != null) {
            Request request = requestStorage.getByName(bookName);
            request.setAmount(request.getAmount() - amount);
            requestStorage.deleteIfEmpty(bookName);
        }
    }

    public void createOrder(String customerName, String orderedBook, int amount) {
        orderStorage.createOrder(customerName, orderedBook, amount);
        if (!bookStorage.getByName(orderedBook).isInStock()) {
            requestStorage.createRequest(orderedBook, amount);
        }
    }
}